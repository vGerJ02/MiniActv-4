# ManejoServicioKotlinInc
Little demo using a Service component to play a MediaPlayer (an embedded audio) in Kotlin. A few code lines have been expressly removed in order to be completed.

# A
Como sabéis, la actividad principal (MainActivity) muestra dos botones: “Iniciar” y “Detener”, encargados de iniciar y detener, respectivamente, una componente Service. Esta última gestiona un MediaPlayer asociado a un audio (train.mp3 incorporado en la carpeta de recursos raw), utilizando los tres métodos callback del ciclo de vida.
# B
Ampliar el servicio de reproducción para ofrecer, además del sonido del tren, una determinada pieza de música.Para ello, la interfaz de usuario mostrará tres botones: “Reproducir sonido”, “Reproducir canción” y “Detener” para parar la reproducción en marcha. Nada impide que puedan escucharse ambas piezas simultáneamente, si el usuario pone ambas en marcha. No obstante, deberá controlarse que al clicar sobre el botón “Detener” se detenga la o las piezas que se estén reproduciendo en ese momento. Se utilizarán dos Strings (“Iniciar Sonido” e “Iniciar Cancion”), a pasar a través de la parte extra del intent, a fin de distinguir qué pieza iniciar por parte del Service. Mediante un Toast se indicará el tipo de reproducción solicitado, haciendo emerger el mensaje “Seleccionado Sonido” o “Seleccionado canción”, respectivamente. Se utilizarán Toast también para hacer el seguimiento de la componente Service tal que así: mensaje “Servicio creado” al crearlo, “Servicio canción activado”, o “Servicio sonido activado”, al activarlo y, por último, “Servicio detenido” al detenerlo.
# C 
Incorporar un BroadcastReceiver como componente intermedia para activar el servicio de reproducción a la carta. En este caso la activity activa el BroadcastReceiver, que es quien se encarga de poner en marcha el Service. Igualmente, podremos escoger sonido o canción, recurriendo a la parte de extras del intent. Igualmente, mediante mensajes Toast se podrá hacer el seguimiento del BroadcastReceiver, en cada una de las situaciones (sugerencia: Strings “BroadcastReceiver - Inicio reproducción sonido”, “BroadcastReceiver - Inicio reproducción canción” y “BroadcastReceiver - Detencion reproduccion”, respectivamente).
# D
Programar componente BroadcastReceiver para ser activada automáticamente, al conectar/desconectar los auriculares (evento del sistema android.intent.action.HEADSET_PLUG). Para distinguir entre el estado ON –conectados- y OFF –desconectados-, se utiliza el extra con clave “state” y valor un int: 1 para ON y 0 para OFF. Al conectar los auriculares se iniciará la canción que viene incorporada en la app. Complementariamente, al desconectar los auriculares finalizará su reproducción. Igual que anteriormente, quien se encarga de la reproducción del audio es la componente Service. Los Toast serán “BroadcastReceiver - HEADSET_PLUG-ON” y lo mismo para “OFF”
